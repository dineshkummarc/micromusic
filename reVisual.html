<!DOCTYPE HTML>
<html>
<head>
    <script src="glue.js"></script>
    <script src="makeSamples.js"></script>
    <script src="benmu-riff.js"></script>
    <script src="benmu-dataurl.js"></script>
    <script src="sampleToImage.js"></script>

    <link type="text/css" href="style.css" rel="stylesheet"/>

</head>
<body>
<form onsubmit="return false;">
    <input type="text" id="oneliner" value="127*sin(t/1000)"/><br/>
    <input type="submit" value="Generate Sound" id="gen" />
</form>
<div id="error"></div>
<pre>[enter] : play
[esc]   : pause
</pre>
<canvas id="canvas" width="1024" height="128"></canvas>
<audio id="player" autoplay="true" controls="true"/>

<script>
    var keyMap = { 13: play, 27: stop};
    function onKey(event) {
        var fn = keyMap[event.keyCode];
        if(fn) fn();
    }
    function onPlay() {
        var oneLiner = document.getElementById('oneliner').value;
        sampleData = makeSampleData(oneLiner);

        play(sampleData);
        generatePreview(sampleData,1,document.getElementById('canvas'));
    }

    document.getElementById("oneliner").focus();
    document.getElementById("oneliner").onkeydown = onKey;
    document.getElementById("gen").onclick = onPlay;
</script>
</body>
</html>
